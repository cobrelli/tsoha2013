create table tuotteet (id serial primary key, nimi text, hinta integer);

create table kayttajat (tunnus varchar(20) primary key, nimi text, salasana varchar(20), kayttajatyyppi varchar(14));

create table palvelut (id serial primary key, palvelu_id varchar(20), palvelija_id varchar(20) references kayttajat(tunnus), toimipiste_id varchar(20) references paikat(toimipiste_id), hinta decimal, kuvaus text);

create table varaukset (varausnumero varchar(20), palvelu_id integer references palvelut(id), pvm date, klo time);

insert into palvelut (palvelu_id, palvelija_id, toimipiste_id, hinta, kuvaus) values ('palvelu 1', (select tunnus from kayttajat where tunnus = 'vesa1'), (select toimipiste_id from paikat where toimipiste_id = 'paikka1'), '25', 'Palvelukokonaisuus nro 1');

insert into varaukset (varausnumero, palvelu_id, pvm, klo) values ('236', (select id from palvelut where palvelu_id='palvelu 1' and palvelija_id='pena' and toimipiste_id='paikka2'), '2013-04-20', '15:00');
